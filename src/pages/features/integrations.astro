---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
// import { Icon } from "astro-iconify"; // Temporarily commented out
import { Icon } from 'astro-icon/components'; // Use astro-icon component
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
// SecondaryCTA is not explicitly used in the final HTML CTA, but keeping import for consistency
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro";
import FAQ from "@components/sections/misc/FAQ.astro"; // Import the FAQ component

// --- Helper Functions ---
// Simple SVG placeholder function
const svgPlaceholder = (width: number, height: number, text: string = "Placeholder") => {
  const escapedText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%236B7280' font-family='sans-serif' font-size='16'%3E${escapedText}%3C/text%3E%3C/svg%3E`; // Tailwind gray-200 background, gray-500 text
}

// --- Page Data ---
const pageTitle = "Seamless ezCater & QuickBooks Integrations | Okra Orders";

const hero = {
  title: "Stop Typing, Start Thriving: Automate ezCater & QuickBooks",
  subTitle: "Eliminate hours of manual data entry and reconciliation. Okra Orders seamlessly connects your online storefront, ezCater, and QuickBooks Online, creating a truly unified operational hub.",
  // Image slot will contain the logo flow graphic
};

const featureEzCater = {
  title: "Bring Your ezCater Orders Home",
  subTitle: "Tired of checking the ezCater portal constantly? Okra automatically pulls your approved ezCater orders directly into your main dashboard using secure webhooks. See all your fulfillment requirements in one place.",
  listItems: [
    "Real-time sync for new/approved ezCater orders.",
    "View ezCater order details (items, customizations, totals) within Okra.",
    "Unified operational view simplifies daily prep planning.",
    "ezCater data is mapped consistently for unified reporting.",
  ],
  imgSrc: svgPlaceholder(500, 600, "Screenshot: Unified Order List"), // Reusing placeholder text
  imgAlt: "Unified Order List Placeholder (Okra + ezCater)",
  imagePosition: "left" as const,
  logoSrc: svgPlaceholder(100, 40, "ezCater Logo"), // Placeholder for ezCater logo
  logoAlt: "ezCater Logo Placeholder",
};

const featureQuickBooks = {
  title: "Automate Your Accounting with QuickBooks Sync",
  subTitle: "**This is the game-changer.** Stop spending hours manually creating sales receipts in QuickBooks. Okra automatically pushes accurate receipt data for **every single order** ‚Äì whether it came directly through Okra **or from ezCater** ‚Äì straight into your QuickBooks Online account.",
  listItems: [
    "Automatic Sales Receipt creation in QuickBooks Online.",
    "Handles both direct Okra orders AND **ezCater orders**.",
    "Massively reduces manual data entry and potential errors.",
    "Streamlines financial reconciliation and reporting.",
    "Reliable data mapping ensures accuracy.",
  ],
  imgSrc: svgPlaceholder(500, 600, "Visual: Okra to QB Sync"),
  imgAlt: "Okra Order Syncing to QuickBooks Sales Receipt Placeholder",
  imagePosition: "right" as const,
  logoSrc: svgPlaceholder(150, 40, "QuickBooks Logo"), // Placeholder for QuickBooks logo
  logoAlt: "QuickBooks Logo Placeholder",
};

const finalCTA = {
  title: "Stop the Double Entry. Start Saving Time.",
  subTitle: "Learn how Okra Orders' powerful integrations can transform your daily workflow.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
};

const integrationsFaqs = {
  faqs: [
    {
      question: "We get a lot of orders through ezCater. Do I still need to manually enter those into QuickBooks?",
      answer: "No! This is a major time-saver with Okra. Okra integrates with ezCater to pull those orders into your dashboard. Crucially, it then uses the QuickBooks integration to automatically create Sales Receipts for those ezCater orders, just like it does for your direct Okra orders."
    },
    {
      question: "How exactly does the ezCater integration work? Can I manage the order fully in Okra?",
      answer: "Okra connects to ezCater via webhooks. When an order is approved on ezCater, it automatically appears in your Okra order list with all the details (items, customizations, totals). While you can view the order details and manage its fulfillment status within Okra (and sync it to QB), modifications to the order itself (like changing items) must still be done through ezCater support, as per their system rules."
    },
    {
      question: "What information from Okra gets sent to QuickBooks Online?",
      answer: "Okra primarily creates detailed Sales Receipts in QuickBooks for every completed and paid order (both direct Okra orders and synced ezCater orders). This includes line items, quantities, pricing, customer information (if available), taxes, tips, and discounts, streamlining your reconciliation process."
    },
    {
      question: "Is the data sync between Okra, ezCater, and QuickBooks reliable?",
      answer: "Yes. For ezCater, we use their official API and webhooks for real-time updates. For QuickBooks, we use their secure API connection. We map the data carefully to ensure consistency, so the Sales Receipts generated in QuickBooks accurately reflect the order details from Okra (which includes the mapped ezCater data)."
    },
    {
      question: "We use a different accounting system / ERP. Can Okra integrate with that?",
      answer: "While ezCater and QuickBooks Online are our primary V1 integrations, Okra is built with an API-first approach. This means the platform is designed for connectivity. We are open to exploring integrations with other systems based on customer needs and technical feasibility in the future."
    },
    {
      question: "Does the QuickBooks integration handle sales tax correctly, especially if we operate in multiple states?",
      answer: "Okra allows you to configure tax rates per store location. When generating the Sales Receipt for QuickBooks, it uses the appropriate tax rate based on the fulfilling store, ensuring accurate tax reporting for different jurisdictions."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="hero-gradient-primary pb-8 md:pb-12"> <!-- Removed top padding -->
      <HeroSection
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
      >
        <Fragment slot="image">
          <!-- Integration Flow Graphic Placeholder -->
          <div class="mt-10 px-6 flex justify-center items-center space-x-4 md:space-x-6">
            <div class="p-2 rounded bg-white shadow-md">
                <img src={svgPlaceholder(100, 40, "ezCater Logo")} alt="ezCater Logo Placeholder" class="h-8 md:h-10" />
            </div>
            <Icon name="heroicons:arrow-long-right" class="w-8 h-8 text-primary flex-shrink-0" /> <!-- Restored Icon -->
            <!-- <span class="w-8 h-8 text-primary flex-shrink-0">‚û°Ô∏è</span> --> <!-- Removed Placeholder -->
            <div class="p-2 rounded bg-white shadow-md text-center">
                <span class="text-lg font-bold text-neutral-800">Okra<span class="text-primary">Orders</span></span>
            </div>
             <Icon name="heroicons:arrow-long-right" class="w-8 h-8 text-primary flex-shrink-0" /> <!-- Restored Icon -->
             <!-- <span class="w-8 h-8 text-primary flex-shrink-0">‚û°Ô∏è</span> --> <!-- Removed Placeholder -->
            <div class="p-2 rounded bg-white shadow-md">
                <img src={svgPlaceholder(120, 40, "QuickBooks Logo")} alt="QuickBooks Logo Placeholder" class="h-8 md:h-10" />
            </div>
          </div>
        </Fragment>
      </HeroSection>
  </div>

  <!-- Feature Detail 1: ezCater Integration -->
  <section class="py-16 md:py-24 bg-white rounded-b-xl"> <!-- Changed rounding -->
    <FeaturesStatsAlt
        title={featureEzCater.title}
        subTitle={featureEzCater.subTitle}
        benefits={featureEzCater.listItems}
        imgSrc={featureEzCater.imgSrc}
        imgAlt={featureEzCater.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureEzCater.imagePosition}
     >
        {/* Add logo before title if needed, using a slot or custom structure */}
         <Fragment slot="before_title">
            <img src={featureEzCater.logoSrc} alt={featureEzCater.logoAlt} class="h-8 mb-3"/>
        </Fragment>
     </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 2: QuickBooks Integration -->
  <section class="py-16 md:py-24">
    <FeaturesStatsAlt
        title={featureQuickBooks.title}
        subTitle={featureQuickBooks.subTitle}
        benefits={featureQuickBooks.listItems}
        imgSrc={featureQuickBooks.imgSrc}
        imgAlt={featureQuickBooks.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureQuickBooks.imagePosition}
    >
        <Fragment slot="before_title">
            <img src={featureQuickBooks.logoSrc} alt={featureQuickBooks.logoAlt} class="h-8 mb-3"/>
        </Fragment>
    </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 3: Built for Connectivity (Custom Section) -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-neutral-800 mb-4">Designed to Connect Your Business</h2>
        <p class="text-lg text-gray-600 mb-10 max-w-2xl mx-auto">
           Okra Orders is built with an API-first approach. While seamless ezCater and QuickBooks integrations are ready today, our platform is designed to connect with other essential tools your catering business relies on as we grow together.
        </p>
        <div class="flex flex-col sm:flex-row justify-center items-start gap-y-8 sm:gap-x-12 md:gap-x-16 text-gray-700">
            <div class="text-center max-w-xs mx-auto sm:mx-0">
                <Icon name="heroicons:bolt" class="w-12 h-12 mx-auto text-primary mb-3" /> <!-- Restored Icon -->
                <!-- <span class="text-4xl">‚ö°Ô∏è</span> --> <!-- Removed Placeholder -->
                <h3 class="font-semibold text-neutral-700 mb-1">API-First</h3>
                <p class="text-sm text-gray-600">Foundation for future integrations.</p>
            </div>
            <div class="text-center max-w-xs mx-auto sm:mx-0">
                 <Icon name="heroicons:arrows-right-left" class="w-12 h-12 mx-auto text-primary mb-3" /> <!-- Restored Icon -->
                 <!-- <span class="text-4xl">‚ÜîÔ∏è</span> --> <!-- Removed Placeholder -->
                <h3 class="font-semibold text-neutral-700 mb-1">Central Hub</h3>
                 <p class="text-sm text-gray-600">Connect your critical apps.</p>
            </div>
             <div class="text-center max-w-xs mx-auto sm:mx-0">
                 <Icon name="heroicons:chart-bar-square" class="w-12 h-12 mx-auto text-primary mb-3" /> <!-- Restored Icon -->
                 <!-- <span class="text-4xl">üìä</span> --> <!-- Removed Placeholder -->
                <h3 class="font-semibold text-neutral-700 mb-1">Future-Ready</h3>
                 <p class="text-sm text-gray-600">Adapts as your needs evolve.</p>
            </div>
        </div>
      </div>
  </section>

  <!-- CTA Section (Custom Section) -->
  <section class="bg-gradient-to-r from-primary to-green-700 text-white py-16 rounded-xl">
      <div class="container mx-auto px-6 text-center">
          <h2 class="text-3xl font-bold mb-4">{finalCTA.title}</h2>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">{finalCTA.subTitle}</p>
          <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
              <PrimaryCTA title={finalCTA.primaryBtn} url={finalCTA.primaryBtnURL} />
              <a href={finalCTA.secondaryBtnURL} target="_blank" rel="noopener noreferrer" class="inline-block border border-white text-white px-6 py-2.5 rounded-md text-base font-semibold hover:bg-white hover:text-primary transition duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white">
                 {finalCTA.secondaryBtn}
              </a>
          </div>
      </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title="Your Integration Questions Answered" faqs={integrationsFaqs} />
  </section>

</MainLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro";
import { Icon } from "astro-iconify"; // Added import for Iconify
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro";

// --- Helper Functions ---
// Simple SVG placeholder function
const svgPlaceholder = (width: number, height: number, text: string = "Placeholder") => {
  const escapedText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%236B7280' font-family='sans-serif' font-size='16'%3E${escapedText}%3C/text%3E%3C/svg%3E`; // Tailwind gray-200 background, gray-500 text
}

// --- Page Data ---
const pageTitle = "Actionable Analytics & AI Insights for Caterers | Okra Orders";

const hero = {
  // tagline: "Business Performance", // Removed tagline as HeroSection doesn't support it
  title: "Understand Your Business Better, Effortlessly",
  subTitle: "Go beyond simple order counts. Okra Orders provides a clear dashboard with key metrics, sales trends, and unique AI-powered insights to help you make smarter decisions for your catering business.",
  imgAlt: "Main Analytics Dashboard Placeholder",
  imgSrc: svgPlaceholder(900, 450, "Screenshot: Main Analytics Dashboard"),
};

const featureDashboard = {
  title: "Your Business Health, At a Glance",
  subTitle: "Log in and instantly see how your business is performing. The Okra dashboard presents key metrics like total sales and order volume, filterable by brand or individual store. Visualize daily and weekly sales trends to quickly spot patterns.",
  listItems: [
    "Centralized view of key performance indicators (KPIs).",
    "Track total sales revenue and order counts.",
    "Filter data by specific store or view brand-wide totals.",
    "Simple charts visualize daily and weekly sales trends.",
  ],
  imgSrc: svgPlaceholder(500, 600, "Screenshot: Dashboard KPIs & Charts"),
  imgAlt: "Dashboard KPIs & Charts Placeholder",
  imagePosition: "left" as const,
};

// NEW: Data structure for FeaturesNavs
const aiInsightsNav = {
  title: "Get Smarter with AI Insights", // Main title for the section
  tabs: [
    {
      heading: "Automated Daily Analysis",
      content: "Okra's AI engine reviews your sales data every day, looking for patterns and outliers.",
      svg: "mdi:chart-timeline-variant-shimmer",
      src: svgPlaceholder(500, 450, "Visual: Daily Analysis"),
      alt: "AI Daily Analysis Placeholder",
      width: 500,
      height: 450,
      first: true, // Mark this as the default tab
    },
    {
      heading: "Proactive Alerts",
      content: "Receive notifications about significant changes, potential issues like zero sales, or emerging trends.",
      svg: "mdi:bell-alert-outline",
      src: svgPlaceholder(500, 450, "Visual: Alert Example"),
      alt: "AI Alert Example Placeholder",
      width: 500,
      height: 450,
    },
    {
      heading: "Early Issue Detection",
      content: "Identify potential problems before they impact your bottom line, allowing you to act quickly.",
      svg: "mdi:magnify-scan",
      src: svgPlaceholder(500, 450, "Visual: Issue Detection"),
      alt: "AI Issue Detection Placeholder",
      width: 500,
      height: 450,
    },
    {
      heading: "Focused Attention",
      content: "The AI highlights where your attention is needed most, saving you time and effort.",
      svg: "mdi:target-focus",
      src: svgPlaceholder(500, 450, "Visual: Focused Insight"),
      alt: "AI Focused Insight Placeholder",
      width: 500,
      height: 450,
    },
  ],
};

const finalCTA = {
  title: "Ready to See Your Business Clearly?",
  subTitle: "Start using Okra Orders and gain valuable insights from day one.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="bg-gradient-to-b from-blue-50 to-white pt-16 md:pt-24 pb-8 md:pb-12"> <!-- Using Blue accent -->
      <HeroSection
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
      >
        <Fragment slot="image">
          <div class="mt-8 px-6">
             <img src={hero.imgSrc} alt={hero.imgAlt} class="h-72 w-full max-w-3xl mx-auto rounded-lg shadow-md object-cover"/>
          </div>
        </Fragment>
      </HeroSection>
  </div>

  <!-- Feature Detail 1: Central Dashboard -->
  <section class="py-16 md:py-24 bg-white">
    <FeaturesStatsAlt
        title={featureDashboard.title}
        subTitle={featureDashboard.subTitle}
        benefits={featureDashboard.listItems}
        imgSrc={featureDashboard.imgSrc}
        imgAlt={featureDashboard.imgAlt}
        imagePosition={featureDashboard.imagePosition}
     />
  </section>

  <!-- Feature Detail 2: AI-Powered Insights (Now using FeaturesNavs) -->
  <section class="py-16 md:py-24 bg-gray-100">
    <FeaturesNavs
        title={aiInsightsNav.title}
        tabs={aiInsightsNav.tabs}
    />
  </section>

  <!-- Feature Detail 3: Unified Reporting (Custom Section) -->
  <section class="py-16 md:py-24 bg-white">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-neutral-800 mb-4">The Complete Picture: Okra + ezCater</h2>
        <p class="text-lg text-gray-600 mb-10 max-w-2xl mx-auto">
           Because Okra integrates your ezCater orders, your dashboard metrics and insights reflect your *entire* catering operation. Finally get a true, unified view of your total sales performance across all your channels.
        </p>
        <!-- Simple graphic: Okra Logo + ezCater Logo -> Graph Icon -->
         <div class="flex justify-center items-center space-x-4 md:space-x-6 opacity-80">
            <div class="p-2 rounded bg-white shadow-md text-center">
                <span class="text-lg font-bold text-neutral-800">Okra<span class="text-primary">Orders</span></span>
            </div>
            <span class="text-2xl font-bold text-gray-400">+</span>
            <div class="p-2 rounded bg-white shadow-md">
                <img src={svgPlaceholder(100, 40, "ezCater Logo")} alt="ezCater Logo Placeholder" class="h-8 md:h-10" />
            </div>
            <Icon name="heroicons:arrow-long-right" class="w-8 h-8 text-gray-400 flex-shrink-0" />
            <Icon name="heroicons:chart-pie" class="w-14 h-14 text-primary flex-shrink-0" />
         </div>
      </div>
  </section>

  <!-- Future Potential Section (Custom Simple Section) -->
  <section class="py-16 md:py-24 bg-gray-100">
      <div class="container mx-auto px-6 text-center">
           <h2 class="text-3xl font-bold text-neutral-800 mb-4">Built for Deeper Insights</h2>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto">
             Today's dashboard gives you essential visibility. Okra's platform is built on a solid data foundation, ready to deliver even more advanced reporting and analytics features in the future to help you grow your business strategically.
          </p>
      </div>
  </section>

  <!-- CTA Section (Custom Section) -->
  <section class="bg-gradient-to-r from-primary to-green-700 text-white py-16"> <!-- Consistent gradient CTA -->
      <div class="container mx-auto px-6 text-center">
          <h2 class="text-3xl font-bold mb-4">{finalCTA.title}</h2>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">{finalCTA.subTitle}</p>
          <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
              <PrimaryCTA title={finalCTA.primaryBtn} url={finalCTA.primaryBtnURL} />
              <a href={finalCTA.secondaryBtnURL} target="_blank" rel="noopener noreferrer" class="inline-block border border-white text-white px-6 py-2.5 rounded-md text-base font-semibold hover:bg-white hover:text-primary transition duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white">
                 {finalCTA.secondaryBtn}
              </a>
          </div>
      </div>
  </section>

</MainLayout> 
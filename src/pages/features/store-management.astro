---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro";
import QuoteFeatureSplit from "@components/sections/misc/QuoteFeatureSplit.astro";
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
import FAQ from "@components/sections/misc/FAQ.astro";
import IconListSection from "@components/sections/features/IconListSection.astro";
import CTASection from "@components/sections/misc/CTASection.astro";
import ctaBgImage from "@/images/layered-waves-haikei.svg"; // Import the background SVG

// --- Helper Functions ---
// Simple SVG placeholder function (replicated for self-containment)
const svgPlaceholder = (width: number, height: number, text: string = "Placeholder") => {
  // Basic escaping for text within SVG
  const escapedText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%236B7280' font-family='sans-serif' font-size='16'%3E${escapedText}%3C/text%3E%3C/svg%3E`; // Tailwind gray-200 background, gray-500 text
}

// --- Page Data ---
const pageTitle = "Intuitive Store & Menu Management | Okra Orders";

const hero = {
  title: "Take Control of Your Catering Setup, Effortlessly",
  subTitle: "From onboarding your first location to managing complex menus across multiple stores, Okra Orders gives you the tools to configure everything precisely and efficiently.",
  imgAlt: "Admin Dashboard Overview Placeholder",
  imgSrc: svgPlaceholder(800, 400, "Admin Dashboard Overview"),
};

const featureOnboarding = {
  title: "Set Up Fast, Manage Multiple Locations with Ease",
  subTitle: "Get started quickly with our guided setup wizard. Have multiple locations or brands? Okra's unified interface lets you manage them all efficiently. <strong>Save hours</strong> by duplicating individual items or entire menus from one store to many others instantly.",
  features: [
    {
      heading: "Guided Onboarding Wizard",
      content: "Step-by-step wizard clarifies every option for quick setup.",
      svg: "heroicons:sparkles",
      src: svgPlaceholder(500, 300, "Onboarding Step 1"),
      alt: "Guided Onboarding Wizard Step Placeholder",
      width: 500,
      height: 300,
      first: true,
    },
    {
      heading: "Unified Multi-Store Management",
      content: "Consistent interface simplifies managing multiple stores/brands.",
      svg: "heroicons:building-storefront",
      src: svgPlaceholder(500, 300, "Multi-Store View"),
      alt: "Unified Multi-Store Dashboard Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Instant Menu/Item Duplication",
      content: "Copy menus/items from one store to multiple others in clicks.",
      svg: "heroicons:document-duplicate",
      src: svgPlaceholder(500, 300, "Menu Copy Action"),
      alt: "Menu Item Duplication Action Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Location-Specific Settings",
      content: "Maintain unique settings like hours and menus per location.",
      svg: "heroicons:map-pin",
      src: svgPlaceholder(500, 300, "Location Settings"),
      alt: "Location Specific Settings Placeholder",
      width: 500,
      height: 300,
    },
  ],
};

const quoteMultiLocation = {
  quoteContent: "Setting up a new location's menu used to be a multi-day task. The ability to duplicate items we've already perfected in another store, including all their photos and detailed options, will literally save us hours, maybe days, per launch.",
  quoteAttribution: "- Feedback from a Multi-Location Caterer during Okra Orders Development",
  featureIconName: "heroicons:document-duplicate",
  featureBadgeText: "Easy Duplication",
  featureTitle: "Consistency Across Locations, Without the Headaches",
  featureDescription: "Running multiple stores often means duplicating effort. Okra tackles this head-on. Our duplication tools let you instantly copy proven menu items – including their photos and detailed options – from one store to several others. Manage core settings centrally, but retain the flexibility to tweak pricing, hours, or availability for each specific location easily.",
  layoutDirection: "quote-left" as const,
};

const featureMenuMastery = {
  title: "Craft Your Perfect Online Menu",
  subTitle: "Okra gives you granular control to accurately represent your offerings online. Configure detailed item options, manage categories, set pricing per unit (person, pint, etc.), and visually arrange how items appear to customers using simple drag-and-drop.",
  features: [
    {
      heading: "Deep Item Configuration",
      content: "Set options, customizations, pricing units (person, pint, etc.).",
      svg: "heroicons:cog-6-tooth",
      src: svgPlaceholder(500, 300, "Item Config Detail"),
      alt: "Menu Item Configuration Detail Placeholder",
      width: 500,
      height: 300,
      first: true,
    },
    {
      heading: "Categories & Recommendations",
      content: "Define categories and control recommendations (e.g., suggest add-ons).",
      svg: "heroicons:tag",
      src: svgPlaceholder(500, 300, "Category Setup"),
      alt: "Category Setup Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Easy Reordering",
      content: "Visually reorder menu categories and items via drag-and-drop.",
      svg: "heroicons:arrows-up-down",
      src: svgPlaceholder(500, 300, "Drag & Drop UI"),
      alt: "Drag and Drop Reordering UI Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Reusable Option Sets",
      content: "Define option sets once and reuse them across multiple menu items.",
      svg: "heroicons:clipboard-document-list",
      src: svgPlaceholder(500, 300, "Option Sets"),
      alt: "Reusable Option Sets Placeholder",
      width: 500,
      height: 300,
    },
  ],
};

const featureBranding = {
  title: "Own Your Brand, Enhance Visual Appeal",
  subTitle: "Present a professional image that's uniquely yours. Use your own custom domain (or subdomain) and logo. Need compelling visuals quickly? Leverage our integrated AI to generate consistent, catering-specific images for your menu items.",
  // Note: The list item about AI image disclaimer is handled differently below for emphasis
  listItems: [
    "Connect your custom domain (e.g., `catering.yourbrand.com`).",
    "Upload your logo for a fully branded experience.",
    "(Higher tiers) Customize colors to match your brand identity.",
    "Generate realistic menu photos with AI assistance.*",
  ],
  disclaimer: "*Ensure AI images accurately represent final food presentation.",
  imgSrc: svgPlaceholder(500, 600, "Visual: White-Label Settings / AI Images"),
  imgAlt: "White-Label Settings / AI Images Placeholder",
  imagePosition: "left" as const,
};

// Config for Operational Rules IconListSection
const operationalRules = {
  title: "Define Your Rules, Prevent Bad Orders",
  subTitle: "Set precise operating hours for pickup vs. delivery, define lead times, and block out dates in advance (single days or recurring). Okra enforces these rules automatically, ensuring customers can only order when you're actually available.",
  items: [
    { iconName: "heroicons:clock", text: "Operating Hours" },
    { iconName: "heroicons:calendar-days", text: "Lead Times & Blackouts" },
    { iconName: "heroicons:map-pin", text: "Delivery Zones" },
  ],
  // Custom structure for this component requires adjustments in the component itself or overriding here.
  // For now, using standard IconListSection structure, description added to config but not rendered by default component.
};

const finalCTA = {
  title: "Ready to Take Control of Your Online Catering?",
  subTitle: "Explore the intuitive admin panel and see how easy store management can be.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
  bgImageURL: ctaBgImage.src, // Add background image
  textColor: "white" as const // Keep text white
};

const storeManagementFaqs = {
  title: "Your Store & Menu Setup Questions Answered",
  faqs: [
    {
      question: "Setting up a new online menu seems daunting. How does Okra help simplify the process?",
      answer: "Okra guides you with an onboarding wizard for initial store setup. For menus, you can define reusable option sets (like salad dressings or tortilla choices) and easily apply them to multiple items. If you have multiple locations with similar menus, you can duplicate items (including their options and photos) from one store to others, saving significant setup time."
    },
    {
      question: "We have multiple locations. Can we manage them all from one account but still have different menus or hours for each?",
      answer: "Yes. Okra is built for multi-location management. You manage all your stores under one brand (or multiple brands if needed). While you can easily copy menu items between stores for efficiency, each store retains its own settings for operating hours (pickup/delivery), blackout dates, menu item availability, and pricing."
    },
    {
      question: "Can I visually arrange how my menu categories and items appear to customers online?",
      answer: "Absolutely. Within the admin panel, you can easily reorder your menu categories (e.g., put \"Seasonal Specials\" first) and the items within each category using simple drag-and-drop. The changes are reflected instantly on your customer-facing storefront."
    },
    {
      question: "We need to ensure our online storefront matches our brand. How much customization is possible?",
      answer: "Okra offers significant branding control. You can connect your own custom domain or subdomain, upload your business logo to appear throughout the ordering experience, and (on higher tiers) customize the color scheme to fully align with your brand identity."
    },
    {
      question: "How do we handle holidays or days we need to close unexpectedly?",
      answer: "The Blackout Dates feature makes this easy. You can pre-schedule recurring closures (like annual holidays) or quickly add single-day closures for unexpected events. Once added, customers will be unable to select those dates for orders, preventing issues."
    },
    {
      question: "We want to suggest drinks or desserts when customers order main courses. Can Okra do that?",
      answer: "Yes. You can designate specific menu categories (like \"Drinks\" or \"Desserts\") as \"Recommended.\" If a customer adds items to their cart but hasn't included anything from a recommended category, Okra can prompt them with suggestions before they check out."
    },
    {
      question: "Some of our menu items don't need complex configuration (e.g., a simple can of soda). Do customers still have to go through extra steps?",
      answer: "No. You can configure items differently. Some items (like complex meals) can require customers to visit a detail page to make choices. Other simpler items (like drinks or basic add-ons) can be configured for direct \"add to cart\" right from the main menu listing."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="bg-gradient-to-b from-blue-50 to-white pt-16 md:pt-24 pb-8 md:pb-12"> <!-- Changed accent color -->
      <HeroSection
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
      >
        <Fragment slot="image">
          <div class="mt-8 px-6">
             <img src={hero.imgSrc} alt={hero.imgAlt} class="h-64 w-full max-w-2xl mx-auto rounded-lg shadow-md object-cover"/>
          </div>
        </Fragment>
      </HeroSection>
  </div>

  <!-- Feature Detail 1: Onboarding & Multi-Location -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesNavs
        title={featureOnboarding.title}
        tabs={featureOnboarding.features}
        instanceId="onboarding"
     />
  </section>

  <!-- Managing Multiple Locations Section -->
  <QuoteFeatureSplit
      quoteContent={quoteMultiLocation.quoteContent}
      quoteAttribution={quoteMultiLocation.quoteAttribution}
      featureIconName={quoteMultiLocation.featureIconName}
      featureBadgeText={quoteMultiLocation.featureBadgeText}
      featureTitle={quoteMultiLocation.featureTitle}
      featureDescription={quoteMultiLocation.featureDescription}
      layoutDirection={quoteMultiLocation.layoutDirection}
  >
      <Fragment slot="feature-graphic">
          <!-- GIF showing the 'copy item to multiple stores' interface -->
      </Fragment>
  </QuoteFeatureSplit>

  <!-- Feature Detail 2: Menu & Item Mastery -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesNavs
        title={featureMenuMastery.title}
        tabs={featureMenuMastery.features}
        instanceId="menu-mastery"
        reverseLayout={true}
    />
  </section>

  <!-- Feature Detail 3: Branding & Visuals -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
     <FeaturesStatsAlt
        title={featureBranding.title}
        subTitle={featureBranding.subTitle}
        benefits={featureBranding.listItems}
        imgSrc={featureBranding.imgSrc}
        imgAlt={featureBranding.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureBranding.imagePosition}
    >
        {/* Add disclaimer below the list */}
        <Fragment slot="after_benefits">
            <p class="text-xs italic mt-2 text-gray-500">{featureBranding.disclaimer}</p>
        </Fragment>
     </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 4: Operational Rules (Using IconListSection) -->
  <IconListSection 
      title={operationalRules.title}
      subTitle={operationalRules.subTitle}
      items={operationalRules.items} 
  />

  <!-- CTA Section (Using CTASection Component) -->
  <CTASection
      title={finalCTA.title}
      subTitle={finalCTA.subTitle}
      primaryBtn={finalCTA.primaryBtn}
      primaryBtnURL={finalCTA.primaryBtnURL}
      secondaryBtn={finalCTA.secondaryBtn}
      secondaryBtnURL={finalCTA.secondaryBtnURL}
      bgImageURL={finalCTA.bgImageURL}
      textColor={finalCTA.textColor}
  />

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title={storeManagementFaqs.title} faqs={storeManagementFaqs} />
  </section>

</MainLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro";
import QuoteFeatureSplit from "@components/sections/misc/QuoteFeatureSplit.astro";
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
import { Icon } from 'astro-icon/components';
import FAQ from "@components/sections/misc/FAQ.astro";

// --- Helper Functions ---
// Simple SVG placeholder function (replicated for self-containment)
const svgPlaceholder = (width: number, height: number, text: string = "Placeholder") => {
  // Basic escaping for text within SVG
  const escapedText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%236B7280' font-family='sans-serif' font-size='16'%3E${escapedText}%3C/text%3E%3C/svg%3E`; // Tailwind gray-200 background, gray-500 text
}

// --- Page Data ---
const pageTitle = "Intuitive Store & Menu Management | Okra Orders";

const hero = {
  title: "Take Control of Your Catering Setup, Effortlessly",
  subTitle: "From onboarding your first location to managing complex menus across multiple stores, Okra Orders gives you the tools to configure everything precisely and efficiently.",
  imgAlt: "Admin Dashboard Overview Placeholder",
  imgSrc: svgPlaceholder(800, 400, "Admin Dashboard Overview"),
};

const featureOnboarding = {
  title: "Set Up Fast, Manage Multiple Locations with Ease",
  subTitle: "Get started quickly with our guided setup wizard. Have multiple locations or brands? Okra's unified interface lets you manage them all efficiently. <strong>Save hours</strong> by duplicating individual items or entire menus from one store to many others instantly.",
  features: [
    {
      heading: "Guided Onboarding Wizard",
      content: "Step-by-step wizard clarifies every option for quick setup.",
      svg: "heroicons:sparkles",
      src: svgPlaceholder(500, 300, "Onboarding Step 1"),
      alt: "Guided Onboarding Wizard Step Placeholder",
      width: 500,
      height: 300,
      first: true,
    },
    {
      heading: "Unified Multi-Store Management",
      content: "Consistent interface simplifies managing multiple stores/brands.",
      svg: "heroicons:building-storefront",
      src: svgPlaceholder(500, 300, "Multi-Store View"),
      alt: "Unified Multi-Store Dashboard Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Instant Menu/Item Duplication",
      content: "Copy menus/items from one store to multiple others in clicks.",
      svg: "heroicons:document-duplicate",
      src: svgPlaceholder(500, 300, "Menu Copy Action"),
      alt: "Menu Item Duplication Action Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Location-Specific Settings",
      content: "Maintain unique settings like hours and menus per location.",
      svg: "heroicons:map-pin",
      src: svgPlaceholder(500, 300, "Location Settings"),
      alt: "Location Specific Settings Placeholder",
      width: 500,
      height: 300,
    },
  ],
};

const featureMenuMastery = {
  title: "Craft Your Perfect Online Menu",
  subTitle: "Okra gives you granular control to accurately represent your offerings online. Configure detailed item options, manage categories, set pricing per unit (person, pint, etc.), and visually arrange how items appear to customers using simple drag-and-drop.",
  features: [
    {
      heading: "Deep Item Configuration",
      content: "Set options, customizations, pricing units (person, pint, etc.).",
      svg: "heroicons:cog-6-tooth",
      src: svgPlaceholder(500, 300, "Item Config Detail"),
      alt: "Menu Item Configuration Detail Placeholder",
      width: 500,
      height: 300,
      first: true,
    },
    {
      heading: "Categories & Recommendations",
      content: "Define categories and control recommendations (e.g., suggest add-ons).",
      svg: "heroicons:tag",
      src: svgPlaceholder(500, 300, "Category Setup"),
      alt: "Category Setup Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Easy Reordering",
      content: "Visually reorder menu categories and items via drag-and-drop.",
      svg: "heroicons:arrows-up-down",
      src: svgPlaceholder(500, 300, "Drag & Drop UI"),
      alt: "Drag and Drop Reordering UI Placeholder",
      width: 500,
      height: 300,
    },
    {
      heading: "Reusable Option Sets",
      content: "Define option sets once and reuse them across multiple menu items.",
      svg: "heroicons:clipboard-document-list",
      src: svgPlaceholder(500, 300, "Option Sets"),
      alt: "Reusable Option Sets Placeholder",
      width: 500,
      height: 300,
    },
  ],
};

const featureBranding = {
  title: "Own Your Brand, Enhance Visual Appeal",
  subTitle: "Present a professional image that's uniquely yours. Use your own custom domain (or subdomain) and logo. Need compelling visuals quickly? Leverage our integrated AI to generate consistent, catering-specific images for your menu items.",
  // Note: The list item about AI image disclaimer is handled differently below for emphasis
  listItems: [
    "Connect your custom domain (e.g., `catering.yourbrand.com`).",
    "Upload your logo for a fully branded experience.",
    "(Higher tiers) Customize colors to match your brand identity.",
    "Generate realistic menu photos with AI assistance.*",
  ],
  disclaimer: "*Ensure AI images accurately represent final food presentation.",
  imgSrc: svgPlaceholder(500, 600, "Visual: White-Label Settings / AI Images"),
  imgAlt: "White-Label Settings / AI Images Placeholder",
  imagePosition: "left" as const,
};

const finalCTA = {
  title: "Ready to Take Control of Your Online Catering?",
  subTitle: "Explore the intuitive admin panel and see how easy store management can be.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
};

const storeManagementFaqs = {
  faqs: [
    {
      question: "Setting up a new online menu seems daunting. How does Okra help simplify the process?",
      answer: "Okra guides you with an onboarding wizard for initial store setup. For menus, you can define reusable option sets (like salad dressings or tortilla choices) and easily apply them to multiple items. If you have multiple locations with similar menus, you can duplicate items (including their options and photos) from one store to others, saving significant setup time."
    },
    {
      question: "We have multiple locations. Can we manage them all from one account but still have different menus or hours for each?",
      answer: "Yes. Okra is built for multi-location management. You manage all your stores under one brand (or multiple brands if needed). While you can easily copy menu items between stores for efficiency, each store retains its own settings for operating hours (pickup/delivery), blackout dates, menu item availability, and pricing."
    },
    {
      question: "Can I visually arrange how my menu categories and items appear to customers online?",
      answer: "Absolutely. Within the admin panel, you can easily reorder your menu categories (e.g., put \"Seasonal Specials\" first) and the items within each category using simple drag-and-drop. The changes are reflected instantly on your customer-facing storefront."
    },
    {
      question: "We need to ensure our online storefront matches our brand. How much customization is possible?",
      answer: "Okra offers significant branding control. You can connect your own custom domain or subdomain, upload your business logo to appear throughout the ordering experience, and (on higher tiers) customize the color scheme to fully align with your brand identity."
    },
    {
      question: "How do we handle holidays or days we need to close unexpectedly?",
      answer: "The Blackout Dates feature makes this easy. You can pre-schedule recurring closures (like annual holidays) or quickly add single-day closures for unexpected events. Once added, customers will be unable to select those dates for orders, preventing issues."
    },
    {
      question: "We want to suggest drinks or desserts when customers order main courses. Can Okra do that?",
      answer: "Yes. You can designate specific menu categories (like \"Drinks\" or \"Desserts\") as \"Recommended.\" If a customer adds items to their cart but hasn't included anything from a recommended category, Okra can prompt them with suggestions before they check out."
    },
    {
      question: "Some of our menu items don't need complex configuration (e.g., a simple can of soda). Do customers still have to go through extra steps?",
      answer: "No. You can configure items differently. Some items (like complex meals) can require customers to visit a detail page to make choices. Other simpler items (like drinks or basic add-ons) can be configured for direct \"add to cart\" right from the main menu listing."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="bg-gradient-to-b from-blue-50 to-white pt-16 md:pt-24 pb-8 md:pb-12"> <!-- Changed accent color -->
      <HeroSection
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
      >
        <Fragment slot="image">
          <div class="mt-8 px-6">
             <img src={hero.imgSrc} alt={hero.imgAlt} class="h-64 w-full max-w-2xl mx-auto rounded-lg shadow-md object-cover"/>
          </div>
        </Fragment>
      </HeroSection>
  </div>

  <!-- Feature Detail 1: Onboarding & Multi-Location -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesNavs
        title={featureOnboarding.title}
        tabs={featureOnboarding.features}
        instanceId="onboarding"
     />
  </section>

  <!-- Managing Multiple Locations Section -->
  <QuoteFeatureSplit
      quoteContent="Setting up our second location's menu took a fraction of the time thanks to the copy feature. Being able to duplicate items with all their complex options already configured was huge."
      quoteAttribution="- Multi-Location Catering Owner"
      featureIconName="heroicons:document-duplicate"
      featureBadgeText="Easy Duplication"
      featureTitle="Consistency Across Locations, Without the Headaches"
      featureDescription="Running multiple stores often means duplicating effort. Okra tackles this head-on. Our duplication tools let you instantly copy proven menu items – including their photos and detailed options – from one store to several others. Manage core settings centrally, but retain the flexibility to tweak pricing, hours, or availability for each specific location easily."
      layoutDirection="quote-left"
  >
      <Fragment slot="feature-graphic">
          <!-- GIF showing the 'copy item to multiple stores' interface -->
      </Fragment>
  </QuoteFeatureSplit>

  <!-- Feature Detail 2: Menu & Item Mastery -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesNavs
        title={featureMenuMastery.title}
        tabs={featureMenuMastery.features}
        instanceId="menu-mastery"
        reverseLayout={true}
    />
  </section>

  <!-- Feature Detail 3: Branding & Visuals -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
     <FeaturesStatsAlt
        title={featureBranding.title}
        subTitle={featureBranding.subTitle}
        benefits={featureBranding.listItems}
        imgSrc={featureBranding.imgSrc}
        imgAlt={featureBranding.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureBranding.imagePosition}
    >
        {/* Add disclaimer below the list */}
        <Fragment slot="after_benefits">
            <p class="text-xs italic mt-2 text-gray-500">{featureBranding.disclaimer}</p>
        </Fragment>
     </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 4: Operational Rules (Custom Section) -->
  <section class="py-16 md:py-24">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-neutral-800 mb-4">Define Your Rules, Prevent Bad Orders</h2>
        <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
           Set precise operating hours for pickup vs. delivery, define lead times, and block out dates in advance (single days or recurring). Okra enforces these rules automatically, ensuring customers can only order when you're actually available.
        </p>
        <div class="flex flex-col sm:flex-row justify-center items-start gap-y-8 sm:gap-x-12 md:gap-x-16">
            <div class="text-center max-w-xs mx-auto sm:mx-0">
                <Icon name="heroicons:clock" class="w-12 h-12 mx-auto text-primary mb-3" />
                <h3 class="font-semibold text-neutral-700 mb-1">Operating Hours</h3>
                <p class="text-sm text-gray-600">Set distinct windows for pickup and delivery, varying by day.</p>
            </div>
            <div class="text-center max-w-xs mx-auto sm:mx-0">
                <Icon name="heroicons:calendar-days" class="w-12 h-12 mx-auto text-primary mb-3" />
                <h3 class="font-semibold text-neutral-700 mb-1">Lead Times & Blackouts</h3>
                 <p class="text-sm text-gray-600">Define order cutoffs and easily block single days or recurring closures.</p>
            </div>
             <div class="text-center max-w-xs mx-auto sm:mx-0">
                <Icon name="heroicons:map-pin" class="w-12 h-12 mx-auto text-primary mb-3" />
                <h3 class="font-semibold text-neutral-700 mb-1">Delivery Zones</h3>
                 <p class="text-sm text-gray-600">Set specific areas where you deliver, ensuring order accuracy.</p>
            </div>
        </div>
      </div>
  </section>

  <!-- CTA Section (Custom Section) -->
  <section class="bg-gradient-to-r from-primary to-green-700 text-white py-16 rounded-xl">
      <div class="container mx-auto px-6 text-center">
          <h2 class="text-3xl font-bold mb-4">{finalCTA.title}</h2>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">{finalCTA.subTitle}</p>
          <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
              <PrimaryCTA title={finalCTA.primaryBtn} url={finalCTA.primaryBtnURL} />
              <a href={finalCTA.secondaryBtnURL} target="_blank" rel="noopener noreferrer" class="inline-block border border-white text-white px-6 py-2.5 rounded-md text-base font-semibold hover:bg-white hover:text-primary transition duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white">
                 {finalCTA.secondaryBtn}
              </a>
          </div>
      </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title="Your Store & Menu Setup Questions Answered" faqs={storeManagementFaqs} />
  </section>

</MainLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
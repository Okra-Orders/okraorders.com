---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
// import HeroSection from "@components/sections/landing/HeroSection.astro"; // Will be replaced
import HeroImage from "@components/sections/landing/HeroImage.astro"; // Import HeroImage
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
// import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro"; // No longer needed for these sections
import QuoteFeatureSplit from "@components/sections/misc/QuoteFeatureSplit.astro";
// import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro"; // Removed unused import
import FAQ from "@components/sections/misc/FAQ.astro";
import IconListSection from "@components/sections/features/IconListSection.astro";
import CTASection from "@components/sections/misc/CTASection.astro";
import ctaBgImage from "@/images/layered-waves-haikei.svg"; // Import the background SVG
import storeHoursImage from "@/images/store-hours.png"; // Import the store-hours.png image
import heroBgImage from "@/images/stacked-waves-haikei.svg"; // Import hero background image
import addNewStoreImage from "@/images/add-new-store.png"; // Import for new section
import menuItemsImage from "@/images/menu-items.png"; // Import for new section
import customUrlImage from "@/images/custom-url.png"; // Import the custom-url.png image
// import { Image } from 'astro:assets'; // Removed unused import

// --- Helper Functions ---
// Removed unused svgPlaceholder function
// const svgPlaceholder = (width: number, height: number, text: string = "Placeholder") => {
//   // Basic escaping for text within SVG
//   const escapedText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
//   return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%236B7280' font-family='sans-serif' font-size='16'%3E${escapedText}%3C/text%3E%3C/svg%3E`; // Tailwind gray-200 background, gray-500 text
// }

// --- Page Data ---
const pageTitle = "Intuitive Store & Menu Management | Okra Orders";

const hero = {
  title: "Manage Your Store Your Way", // Updated title
  subTitle: "Configure store hours, manage locations, and set up your menu with ease. Okra Orders provides flexible tools to tailor your online presence to your operational needs.", // Updated subtitle
  imgAlt: "Okra Orders store hours configuration screen", // Updated alt text
  imgSrc: storeHoursImage, // Use the imported store-hours.png image
  backgroundImageURL: heroBgImage.src // Added background image URL
};

const featureOnboarding = {
  title: "Set Up Fast, Manage Multiple Locations with Ease",
  subTitle: "Get started quickly with our guided setup wizard. Have multiple locations or brands? Okra's unified interface lets you manage them all efficiently. <strong>Save hours</strong> by duplicating individual items or entire menus from one store to many others instantly.",
  features: [
    {
      heading: "Guided Onboarding Wizard",
      content: "Step-by-step wizard clarifies every option for quick setup.",
    },
    {
      heading: "Unified Multi-Store Management",
      content: "Consistent interface simplifies managing multiple stores/brands.",
    },
    {
      heading: "Instant Menu/Item Duplication",
      content: "Copy menus/items from one store to multiple others in clicks.",
    },
    {
      heading: "Location-Specific Settings",
      content: "Maintain unique settings like hours and menus per location.",
    },
  ],
};

// New data structure for FeaturesStatsAlt version of Onboarding
const onboardingStats = {
    title: featureOnboarding.title,
    subTitleHTML: featureOnboarding.subTitle, // Use HTML subtitle
    benefits: featureOnboarding.features.map(feature => `${feature.heading}: ${feature.content}`),
    imgObject: addNewStoreImage, // Changed from imgSrc
    imgAlt: "Admin interface for adding a new store in Okra Orders",
    imagePosition: "right" as const,
};

const quoteMultiLocation = {
  quoteContent: "Setting up a new location's menu used to be a multi-day task. The ability to duplicate items we've already perfected in another store, including all their photos and detailed options, will literally save us hours, maybe days, per launch.",
  quoteAttribution: "- Feedback from a Multi-Location Caterer during Okra Orders Development",
  featureIconName: "heroicons:document-duplicate",
  featureBadgeText: "Easy Duplication",
  featureTitle: "Consistency Across Locations, Without the Headaches",
  featureDescription: "Running multiple stores often means duplicating effort. Okra tackles this head-on. Our duplication tools let you instantly copy proven menu items – including their photos and detailed options – from one store to several others. Manage core settings centrally, but retain the flexibility to tweak pricing, hours, or availability for each specific location easily.",
  layoutDirection: "quote-left" as const,
};

const featureMenuMastery = {
  title: "Craft Your Perfect Online Menu",
  subTitle: "Okra gives you granular control to accurately represent your offerings online. Configure detailed item options, manage categories, set pricing per unit (person, pint, etc.), and visually arrange how items appear to customers using simple drag-and-drop.",
  features: [
    {
      heading: "Deep Item Configuration",
      content: "Set options, customizations, pricing units (person, pint, etc.).",
    },
    {
      heading: "Categories & Recommendations",
      content: "Define categories and control recommendations (e.g., suggest add-ons).",
    },
    {
      heading: "Easy Reordering",
      content: "Visually reorder menu categories and items via drag-and-drop.",
    },
    {
      heading: "Reusable Option Sets",
      content: "Define option sets once and reuse them across multiple menu items.",
    },
  ],
};

// New data structure for FeaturesStatsAlt version of Menu Mastery
const menuMasteryStats = {
    title: featureMenuMastery.title,
    subTitle: featureMenuMastery.subTitle,
    benefits: featureMenuMastery.features.map(feature => `${feature.heading}: ${feature.content}`),
    imgObject: menuItemsImage, // Changed from imgSrc
    imgAlt: "Okra Orders admin panel showing detailed menu item configuration options",
    imagePosition: "left" as const,
};

const featureBranding = {
  title: "Own Your Brand, Enhance Visual Appeal",
  subTitle: "Present a professional image that's uniquely yours. Use your own custom domain (or subdomain) and logo. Need compelling visuals quickly? Leverage our integrated AI to generate consistent, catering-specific images for your menu items.",
  listItems: [
    "Connect your custom domain (e.g., `catering.yourbrand.com`).",
    "Upload your logo for a fully branded experience.",
    "Customize your store setup.",
    "Generate realistic menu photos with AI assistance.*",
  ],
  disclaimer: "*Ensure AI images accurately represent final food presentation.",
  imgSrc: customUrlImage.src, // Updated to use customUrlImage.src
  imgAlt: "Okra Orders admin panel showing custom URL configuration", // Updated alt text
  imagePosition: "left" as const,
};

// Config for Operational Rules IconListSection
const operationalRules = {
  title: "Define Your Rules, Prevent Bad Orders",
  subTitle: "Set precise operating hours for pickup vs. delivery, define lead times, and block out dates in advance (single days or recurring). Okra enforces these rules automatically, ensuring customers can only order when you're actually available.",
  items: [
    { iconName: "heroicons:clock", text: "Operating Hours" },
    { iconName: "heroicons:calendar-days", text: "Lead Times & Blackouts" },
    { iconName: "heroicons:map-pin", text: "Delivery Zones" },
  ],
  // Custom structure for this component requires adjustments in the component itself or overriding here.
  // For now, using standard IconListSection structure, description added to config but not rendered by default component.
};

const finalCTA = {
  title: "Ready to Take Control of Your Online Catering?",
  subTitle: "Explore the intuitive admin panel and see how easy store management can be.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
  bgImageURL: ctaBgImage.src, // Add background image
  textColor: "white" as const // Keep text white
};

const storeManagementFaqs = {
  title: "Your Store & Menu Setup Questions Answered",
  faqs: [
    {
      question: "Setting up a new online menu seems daunting. How does Okra help simplify the process?",
      answer: "Okra guides you with an onboarding wizard for initial store setup. For menus, you can define reusable option sets (like salad dressings or tortilla choices) and easily apply them to multiple items. If you have multiple locations with similar menus, you can duplicate items (including their options and photos) from one store to others, saving significant setup time."
    },
    {
      question: "We have multiple locations. Can we manage them all from one account but still have different menus or hours for each?",
      answer: "Yes. Okra is built for multi-location management. You manage all your stores under one brand (or multiple brands if needed). While you can easily copy menu items between stores for efficiency, each store retains its own settings for operating hours (pickup/delivery), blackout dates, menu item availability, and pricing."
    },
    {
      question: "Can I visually arrange how my menu categories and items appear to customers online?",
      answer: "Absolutely. Within the admin panel, you can easily reorder your menu categories (e.g., put \"Seasonal Specials\" first) and the items within each category using simple drag-and-drop. The changes are reflected instantly on your customer-facing storefront."
    },
    {
      question: "We need to ensure our online storefront matches our brand. How much customization is possible?",
      answer: "Okra offers significant branding control. You can connect your own custom domain or subdomain, upload your business logo to appear throughout the ordering experience.."
    },
    {
      question: "How do we handle holidays or days we need to close unexpectedly?",
      answer: "The Blackout Dates feature makes this easy. You can pre-schedule recurring closures (like annual holidays) or quickly add single-day closures for unexpected events. Once added, customers will be unable to select those dates for orders, preventing issues."
    },
    {
      question: "We want to suggest drinks or desserts when customers order main courses. Can Okra do that?",
      answer: "Yes. You can designate specific menu categories (like \"Drinks\" or \"Desserts\") as \"Recommended.\" If a customer adds items to their cart but hasn't included anything from a recommended category, Okra can prompt them with suggestions before they check out."
    },
    {
      question: "Some of our menu items don't need complex configuration (e.g., a simple can of soda). Do customers still have to go through extra steps?",
      answer: "No. You can configure items differently. Some items (like complex meals) can require customers to visit a detail page to make choices. Other simpler items (like drinks or basic add-ons) can be configured for direct \"add to cart\" right from the main menu listing."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="mb-12"> {/* Consistent wrapper class */}
      <HeroImage
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
        src={hero.imgSrc}
        alt={hero.imgAlt}
        imgWidth={800}
        withReview={false}
        imageScale="scale-90"
        rightOffset="right-[-11rem]"
        minSectionHeight="min-h-[600px]"
        backgroundImageURL={hero.backgroundImageURL}
      />
  </div>

  <!-- Feature Detail 1: Onboarding & Multi-Location (NOW FeaturesStatsAlt) -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesStatsAlt
        title={onboardingStats.title}
        subTitle={onboardingStats.subTitleHTML}
        benefits={onboardingStats.benefits}
        imgObject={onboardingStats.imgObject}
        imgAlt={onboardingStats.imgAlt}
        imgWidth={500} 
        imgHeight={450} 
        imagePosition={onboardingStats.imagePosition}
    />
  </section>

  <!-- Managing Multiple Locations Section -->
  <section class="my-12 rounded-2xl">
  <QuoteFeatureSplit
      quoteContent={quoteMultiLocation.quoteContent}
      quoteAttribution={quoteMultiLocation.quoteAttribution}
      featureIconName={quoteMultiLocation.featureIconName}
      featureBadgeText={quoteMultiLocation.featureBadgeText}
      featureTitle={quoteMultiLocation.featureTitle}
      featureDescription={quoteMultiLocation.featureDescription}
      layoutDirection={quoteMultiLocation.layoutDirection}
  >
      <Fragment slot="feature-graphic">
          <!-- GIF showing the 'copy item to multiple stores' interface -->
      </Fragment>
  </QuoteFeatureSplit>
  </section>
  <!-- Feature Detail 2: Menu & Item Mastery (NOW FeaturesStatsAlt) -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesStatsAlt
        title={menuMasteryStats.title}
        subTitle={menuMasteryStats.subTitle}
        benefits={menuMasteryStats.benefits}
        imgObject={menuMasteryStats.imgObject}
        imgAlt={menuMasteryStats.imgAlt}
        imgWidth={500} 
        imgHeight={450} 
        imagePosition={menuMasteryStats.imagePosition}
    />
  </section>

  <!-- Feature Detail 3: Branding & Visuals -->
  <section class="py-16 md:py-24 bg-white rounded-xl mt-12">
     <FeaturesStatsAlt
        title={featureBranding.title}
        subTitle={featureBranding.subTitle}
        benefits={featureBranding.listItems}
        imgSrc={featureBranding.imgSrc}
        imgAlt={featureBranding.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureBranding.imagePosition}
    >
        {/* Add disclaimer below the list - Commenting out invalid slot usage */}
        {/* <Fragment slot="after_benefits">
            <p class="text-xs italic mt-2 text-gray-500">{featureBranding.disclaimer}</p>
        </Fragment> */}
     </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 4: Operational Rules (Using IconListSection) -->
  <IconListSection 
      title={operationalRules.title}
      subTitle={operationalRules.subTitle}
      items={operationalRules.items} 
  />

  <!-- CTA Section (Using CTASection Component) -->
  <CTASection
      title={finalCTA.title}
      subTitle={finalCTA.subTitle}
      primaryBtn={finalCTA.primaryBtn}
      primaryBtnURL={finalCTA.primaryBtnURL}
      secondaryBtn={finalCTA.secondaryBtn}
      secondaryBtnURL={finalCTA.secondaryBtnURL}
      bgImageURL={finalCTA.bgImageURL}
      textColor={finalCTA.textColor}
  />

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title={storeManagementFaqs.title} faqs={storeManagementFaqs} />
  </section>

</MainLayout>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
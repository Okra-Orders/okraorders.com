---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
// import HeroSection from "@components/sections/landing/HeroSection.astro"; // Replaced with HeroImage
import HeroImage from "@components/sections/landing/HeroImage.astro"; // Use the new image-specific hero
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro"; // Import for feature sections
import QuoteFeatureSplit from "@components/sections/misc/QuoteFeatureSplit.astro"; // Import the reusable component
// import { Icon } from 'astro-icon/components'; // Removed unused import
// import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro"; // Removed unused import
// import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro"; // Removed unused import
import FAQ from "@components/sections/misc/FAQ.astro"; // Import the FAQ component
// import { Image } from 'astro:assets'; // Removed unused import
import RightSection from "@components/ui/blocks/RightSection.astro"; // Import the RightSection component
import IconListSection from "@components/sections/features/IconListSection.astro"; // Import the new component
import CTASection from "@components/sections/misc/CTASection.astro"; // Import the CTA component
import heroImage from '@/images/okra-menu.png'; // Import the hero image
// import startOrderImage from '@/images/start-new-order.png'; // Removed unused import
// import orderSuccessImage from '@/images/order-success.png'; // Removed unused import
import zoomOnMenuItemImage from '@/images/zoom-on-menu-item.png'; // New image 1
import orderPlacedZoomImage from '@/images/order-placed-zoom.png'; // New image 2
import ctaBgImage from "@/images/layered-waves-haikei.svg"; // Import the background SVG
import heroBgImage from "@/images/stacked-waves-haikei.svg"; // Updated import path


// --- Page Data ---
const pageTitle = "Effortless Online Ordering for Your Customers | Okra Orders";

// Removed unused svgPlaceholder function
// const svgPlaceholder = (width: number, height: number) => {
//   return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3C/svg%3E`; // Tailwind gray-200
// }

const hero = {
  tagline: "Customer Experience",
  title: "Give Your Customers an Ordering Experience They'll Love",
  subTitle: "Your online presence is crucial. Okra Orders provides a professional, mobile-friendly storefront that makes browsing, customizing, and paying for catering orders simple and accurate for your customers.",
  imgAlt: "Okra Orders mobile menu screenshot",
  imgSrc: heroImage,
  backgroundImageURL: heroBgImage.src // Add the background image URL
};

const featureCustomization = {
  title: "Handle Any Customization with Ease",
  subTitle: "From choosing tortilla types and salad options to adding specific desserts or sides, Okra handles it all. Clearly present required choices (single or multiple) and optional upsells with accurate, real-time pricing updates. No more confusing phone calls to clarify complex orders.",
  listItems: [
    "Configure required vs. optional choices.",
    "Support single-select (radio) & multi-select (checkboxes).",
    "Display clear pricing per option (e.g., \"$0.00 per person\", \"$2.00 per item\").",
    "Reduce errors by ensuring customers make necessary selections.",
  ],
  imagePosition: "left" as const,
};

const featureMobile = {
  title: "Order Anytime, Anywhere",
  subTitle: "Most catering orders start on a phone. Okra Orders provides a beautiful, responsive experience across all devices. Customers can easily browse menus, configure orders, and check out whether they're at their desk or on the go.",
  listItems: [
    "Mobile-first design ensures great usability on phones.",
    "Intuitive navigation and clear layouts.",
    "Large, tappable buttons and easy-to-read text.",
  ],
  imgObject: zoomOnMenuItemImage,
  imgAlt: "Zoomed-in view of a menu item on a mobile device",
  imgObjectTwo: orderPlacedZoomImage,
  imgAltTwo: "Zoomed-in view of the order placed confirmation screen",
  imagePosition: "right" as const,
};

const featureCheckout = {
  title: "Smart, Secure, and Streamlined Checkout",
  subTitle: "Make paying easy and prevent frustration. Okra automatically enforces your delivery/pickup times and blackout dates *before* checkout. Customers can securely save cards for faster repeat orders, and approved clients can utilize Net 30 terms.",
  listItems: [
    "Prevents orders outside operating hours or on blackout dates.",
    "Securely save multiple credit cards or ACH details.",
    "Automatic fallback to secondary cards minimizes payment failures.",
    "Offer Net 30 terms selectively to trusted clients.",
  ],
  imagePosition: "left" as const,
};

// Config for the QuoteFeatureSplit
const quoteFeature = {
  quoteContent: "We spend a lot of time on the phone clarifying choices for complex packages like our Fajita Bar. Letting customers clearly select required options like tortilla type and salad online first will cut down on those clarification calls and potential errors significantly.",
  quoteAttribution: "- Feedback from a Catering Manager during Okra Orders Development",
  featureIconName: "heroicons:clipboard-document-check",
  featureBadgeText: "Order Accuracy",
  featureTitle: "Capture Complex Orders Right the First Time",
  featureDescription: "Remember those long phone calls trying to nail down every detail of a custom buffet or build-your-own bar? Okra's structured online options guide your customers through the choices logically, capturing required selections and accurate pricing instantly. Reduce clarification calls and ensure the kitchen gets exactly what the customer intended.",
  layoutDirection: "quote-left" as const,
};

// Config for the IconListSection
const featureCommunication = {
  title: "Keep Customers in the Loop, Automatically",
  subTitle: "Reduce \"Where's my order?\" calls. Okra automatically sends email notifications to confirm orders and update customers on payment status, providing peace of mind and a professional touch.",
  items: [
    { iconName: "heroicons:envelope", text: "Order Confirmations" },
    { iconName: "heroicons:chat-bubble-left-ellipsis", text: "Payment Status Updates" },
    { iconName: "heroicons:clock", text: "(More coming soon)", color: "gray" as const }, // Mark as gray
  ],
};

const finalCTA = {
  title: "Ready to Elevate Your Customer's Ordering Experience?",
  subTitle: "See how Okra Orders can make online catering simple and professional for your customers.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
  bgImageURL: ctaBgImage.src, // Add background image
  textColor: "white" as const // Keep text white
};

const onlineOrderingFaqs = {
  faqs: [
    {
      question: "My customers often get confused ordering complex packages over the phone. How does Okra make online customization clearer?",
      answer: "Okra lets you set up customization options step-by-step. You can group choices logically (like \"Choose Your Salad,\" then \"Add a Dessert\"), mark selections as required or optional, and specify if customers pick one or multiple items per group. Prices update instantly as they choose, making complex orders transparent and accurate."
    },
    {
      question: "We have specific lead times (e.g., 8 hours for pickup, 12 for delivery). Can the system prevent customers from ordering too last-minute?",
      answer: "Yes. You configure your minimum lead times per order type (pickup/delivery) in the admin settings. When a customer selects their desired date and time, Okra automatically checks against these lead times and your store's operating hours, only showing available slots and preventing orders that don't meet your requirements."
    },
    {
      question: "Some of our regulars place the same order frequently. Is there a way to make repeat ordering faster for them?",
      answer: "Absolutely. Customers can securely save their payment methods (credit card or ACH) after their first order. For future orders, they can simply select their saved card, speeding up the checkout process significantly. They can also view their past orders easily in their account section. (Future enhancement might include a 'reorder' button)."
    },
    {
      question: "We offer Net 30 terms to some corporate clients, but not everyone. How does Okra handle different payment options?",
      answer: "Okra allows you to enable Net 30 payment terms on a per-customer basis in the admin panel. Only customers you've approved for Net 30 will see that option during checkout. All other customers will see standard payment options like 'Pay with Card' (which securely saves their card via token for later charging)."
    },
    {
      question: "Sometimes card payments fail when we try to charge them on the delivery day. How does the system handle that?",
      answer: "Okra helps minimize disruptions. If the primary saved card fails when charged, the system can be configured to automatically attempt the charge on a secondary saved card (if the customer provided one). If payment ultimately fails, automated notifications can be sent to both you and the customer, allowing you to arrange alternative payment."
    },
    {
      question: "How do customers know their order went through or when payment is taken?",
      answer: "Okra keeps customers informed with automated email notifications. They receive confirmation when their order is successfully placed. You can also configure notifications for when payment is successfully processed or if an issue occurs."
    },
    {
      question: "Will my customers be ordering directly from my specific location, or is it confusing if we have multiple stores or use ghost kitchens?",
      answer: "The experience is designed to be clear for the customer. They either select a specific pickup location or provide a delivery address. The system handles routing the order to the correct fulfillment kitchen (including ghost kitchens) behind the scenes based on your setup and rules, without exposing internal operational details to the customer."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="mb-12">
  <HeroImage 
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
        src={hero.imgSrc} 
        alt={hero.imgAlt} 
        imgWidth={800}
        withReview={false}
        imageScale="scale-90"      
        rightOffset="right-[-5rem]" 
        minSectionHeight="min-h-[800px]"
        backgroundImageURL={hero.backgroundImageURL}
      />
      </div>

  <!-- Feature Detail 1: Customization -->
  <section class="py-16 md:py-24 mb-12 bg-white rounded-xl">
    <FeaturesStatsAlt
        title={featureCustomization.title}
        subTitle={featureCustomization.subTitle}
        benefits={featureCustomization.listItems}
        imagePosition={featureCustomization.imagePosition}
        imgAlt="Customization options video"
     >
      <video 
        slot="media" 
        class="rounded-xl w-full h-auto shadow-md"
        src="/videos/setup-and-buying-configurable.mp4"
        width="500"  
        height="600" 
        autoplay 
        loop 
        muted 
        playsinline
        preload="metadata"
        controls
        aria-label="Video showing customization options in Okra Orders"
      >
        Your browser does not support the video tag.
      </video>
    </FeaturesStatsAlt>
  </section>

  <!-- Stop Playing Telephone Tag Section -->
  <QuoteFeatureSplit
      quoteContent={quoteFeature.quoteContent}
      quoteAttribution={quoteFeature.quoteAttribution}
      featureIconName={quoteFeature.featureIconName}
      featureBadgeText={quoteFeature.featureBadgeText}
      featureTitle={quoteFeature.featureTitle}
      featureDescription={quoteFeature.featureDescription}
      layoutDirection={quoteFeature.layoutDirection}
  >
      <Fragment slot="feature-graphic">
          <!-- Simple graphic comparing a clean Okra order vs. a messy handwritten note -->
      </Fragment>
  </QuoteFeatureSplit>

  <!-- Feature Detail 2: Mobile & Intuitive Flow - Replaced with RightSection -->
  <section class="py-16 md:py-24">
    <RightSection
        title={featureMobile.title}
        subTitle={featureMobile.subTitle}
        btnExists={false} 
        single={false} 
        imgOne={featureMobile.imgObject}
        imgOneAlt={featureMobile.imgAlt}
        imgTwo={featureMobile.imgObjectTwo}
        imgTwoAlt={featureMobile.imgAltTwo}
    />
  </section>

  <!-- Feature Detail 3: Smart & Secure Checkout -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
     <FeaturesStatsAlt
        title={featureCheckout.title}
        subTitle={featureCheckout.subTitle}
        benefits={featureCheckout.listItems}
        imagePosition={featureCheckout.imagePosition}
        imgAlt="Secure checkout video"
    >
      <video 
        slot="media" 
        class="rounded-xl w-full h-auto shadow-md"
        src="/videos/pay-with-stored-cc.mp4"
        width="500"  
        height="600" 
        autoplay 
        loop 
        muted 
        playsinline
        preload="metadata"
        controls
        aria-label="Video showing paying with a stored credit card in Okra Orders checkout"
      >
        Your browser does not support the video tag.
      </video>
    </FeaturesStatsAlt>
  </section>

  <!-- Feature Detail 4: Automated Communication (Using IconListSection) -->
  <IconListSection 
      title={featureCommunication.title}
      subTitle={featureCommunication.subTitle}
      items={featureCommunication.items}
  />

  <!-- CTA Section (Using CTASection Component) -->
  <CTASection
      title={finalCTA.title}
      subTitle={finalCTA.subTitle}
      primaryBtn={finalCTA.primaryBtn}
      primaryBtnURL={finalCTA.primaryBtnURL}
      secondaryBtn={finalCTA.secondaryBtn}
      secondaryBtnURL={finalCTA.secondaryBtnURL}
      bgImageURL={finalCTA.bgImageURL}
      textColor={finalCTA.textColor}
  />

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title="Your Online Ordering Questions Answered" faqs={onlineOrderingFaqs} />
  </section>

</MainLayout> 

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
import HeroSection from "@components/sections/landing/HeroSection.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro"; // Import for feature sections
import QuoteFeatureSplit from "@components/sections/misc/QuoteFeatureSplit.astro"; // Import the reusable component
import { Icon } from 'astro-icon/components'; // Added new import
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro"; // For CTA button
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro"; // For CTA button
import FeaturesNavs from "@components/sections/features/FeaturesNavs.astro";
import FAQ from "@components/sections/misc/FAQ.astro"; // Import the FAQ component


// --- Page Data ---
const pageTitle = "Effortless Online Ordering for Your Customers | Okra Orders";

// Simple SVG placeholder function
const svgPlaceholder = (width: number, height: number) => {
  return `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 ${width} ${height}' width='${width}' height='${height}'%3E%3Crect width='100%25' height='100%25' fill='%23E5E7EB'/%3E%3C/svg%3E`; // Tailwind gray-200
}

const hero = {
  tagline: "Customer Experience",
  title: "Give Your Customers an Ordering Experience They'll Love",
  subTitle: "Your online presence is crucial. Okra Orders provides a professional, mobile-friendly storefront that makes browsing, customizing, and paying for catering orders simple and accurate for your customers.",
  imgAlt: "Mobile Ordering Snippet Placeholder",
  imgSrc: svgPlaceholder(800, 400), // Use SVG placeholder
};

const featureCustomization = {
  title: "Handle Any Customization with Ease",
  subTitle: "From choosing tortilla types and salad options to adding specific desserts or sides, Okra handles it all. Clearly present required choices (single or multiple) and optional upsells with accurate, real-time pricing updates. No more confusing phone calls to clarify complex orders.",
  listItems: [
    "Configure required vs. optional choices.",
    "Support single-select (radio) & multi-select (checkboxes).",
    "Display clear pricing per option (e.g., \"$0.00 per person\", \"$2.00 per item\").",
    "Reduce errors by ensuring customers make necessary selections.",
  ],
  imgSrc: svgPlaceholder(500, 600), // Use SVG placeholder
  imgAlt: "Detailed Customization Example Placeholder",
  imagePosition: "left" as const,
};

const featureMobile = {
  title: "Order Anytime, Anywhere",
  subTitle: "Most catering orders start on a phone. Okra Orders provides a beautiful, responsive experience across all devices. Customers can easily browse menus, configure orders, and check out whether they're at their desk or on the go.",
  listItems: [
    "Mobile-first design ensures great usability on phones.",
    "Intuitive navigation and clear layouts.",
    "Large, tappable buttons and easy-to-read text.",
  ],
  imgSrc: svgPlaceholder(500, 600), // Use SVG placeholder
  imgAlt: "Responsive Menu View Placeholder",
  imagePosition: "right" as const,
};

const featureCheckout = {
  title: "Smart, Secure, and Streamlined Checkout",
  subTitle: "Make paying easy and prevent frustration. Okra automatically enforces your delivery/pickup times and blackout dates *before* checkout. Customers can securely save cards for faster repeat orders, and approved clients can utilize Net 30 terms.",
  listItems: [
    "Prevents orders outside operating hours or on blackout dates.",
    "Securely save multiple credit cards or ACH details (tokenized).",
    "Automatic fallback to secondary cards minimizes payment failures.",
    "Offer Net 30 terms selectively to trusted clients.",
  ],
  imgSrc: svgPlaceholder(500, 600), // Use SVG placeholder
  imgAlt: "Secure Checkout / Payment Options Placeholder",
  imagePosition: "left" as const,
};

const finalCTA = {
  title: "Ready to Elevate Your Customer's Ordering Experience?",
  subTitle: "See how Okra Orders can make online catering simple and professional for your customers.",
  primaryBtn: "Start Free Trial",
  primaryBtnURL: "/signup",
  secondaryBtn: "Try Live Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
};

const onlineOrderingFaqs = {
  faqs: [
    {
      question: "My customers often get confused ordering complex packages over the phone. How does Okra make online customization clearer?",
      answer: "Okra lets you set up customization options step-by-step. You can group choices logically (like \"Choose Your Salad,\" then \"Add a Dessert\"), mark selections as required or optional, and specify if customers pick one or multiple items per group. Prices update instantly as they choose, making complex orders transparent and accurate."
    },
    {
      question: "We have specific lead times (e.g., 8 hours for pickup, 12 for delivery). Can the system prevent customers from ordering too last-minute?",
      answer: "Yes. You configure your minimum lead times per order type (pickup/delivery) in the admin settings. When a customer selects their desired date and time, Okra automatically checks against these lead times and your store's operating hours, only showing available slots and preventing orders that don't meet your requirements."
    },
    {
      question: "Some of our regulars place the same order frequently. Is there a way to make repeat ordering faster for them?",
      answer: "Absolutely. Customers can securely save their payment methods (credit card or ACH) after their first order. For future orders, they can simply select their saved card, speeding up the checkout process significantly. They can also view their past orders easily in their account section. (Future enhancement might include a 'reorder' button)."
    },
    {
      question: "We offer Net 30 terms to some corporate clients, but not everyone. How does Okra handle different payment options?",
      answer: "Okra allows you to enable Net 30 payment terms on a per-customer basis in the admin panel. Only customers you've approved for Net 30 will see that option during checkout. All other customers will see standard payment options like 'Pay with Card' (which securely saves their card via token for later charging)."
    },
    {
      question: "Sometimes card payments fail when we try to charge them on the delivery day. How does the system handle that?",
      answer: "Okra helps minimize disruptions. If the primary saved card fails when charged, the system can be configured to automatically attempt the charge on a secondary saved card (if the customer provided one). If payment ultimately fails, automated notifications can be sent to both you and the customer, allowing you to arrange alternative payment."
    },
    {
      question: "How do customers know their order went through or when payment is taken?",
      answer: "Okra keeps customers informed with automated email and SMS notifications. They receive confirmation when their order is successfully placed. You can also configure notifications for when payment is successfully processed or if an issue occurs."
    },
    {
      question: "Will my customers be ordering directly from my specific location, or is it confusing if we have multiple stores or use ghost kitchens?",
      answer: "The experience is designed to be clear for the customer. They either select a specific pickup location or provide a delivery address. The system handles routing the order to the correct fulfillment kitchen (including ghost kitchens) behind the scenes based on your setup and rules, without exposing internal operational details to the customer."
    }
  ]
};

---

<MainLayout title={pageTitle}>

  <!-- Page Hero Section -->
  <div class="bg-gradient-to-b from-green-50 to-white pt-16 md:pt-24 pb-8 md:pb-12">
      <HeroSection
        title={hero.title}
        subTitle={hero.subTitle}
        primaryBtn={undefined}
        primaryBtnURL={undefined}
        secondaryBtn={undefined}
        secondaryBtnURL={undefined}
      >
        <Fragment slot="image">
          <div class="mt-8 px-6">
             <img src={hero.imgSrc} alt={hero.imgAlt} class="h-64 w-full max-w-2xl mx-auto rounded-lg shadow-md object-cover"/>
          </div>
        </Fragment>
      </HeroSection>
  </div>

  <!-- Feature Detail 1: Customization -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
    <FeaturesStatsAlt
        title={featureCustomization.title}
        subTitle={featureCustomization.subTitle}
        benefits={featureCustomization.listItems}
        imgSrc={featureCustomization.imgSrc}
        imgAlt={featureCustomization.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureCustomization.imagePosition}
     />
  </section>

  <!-- Stop Playing Telephone Tag Section -->
  <QuoteFeatureSplit
      quoteContent="The biggest time saver has been fewer errors on complex orders. What used to take a 10-minute phone call and potential mistakes is now handled perfectly online by the customer themselves."
      quoteAttribution="- Catering Manager Using Okra Orders"
      featureIconName="heroicons:clipboard-document-check"
      featureBadgeText="Order Accuracy"
      featureTitle="Capture Complex Orders Right the First Time"
      featureDescription="Remember those long phone calls trying to nail down every detail of a custom buffet or build-your-own bar? Okra's structured online options guide your customers through the choices logically, capturing required selections and accurate pricing instantly. Reduce clarification calls and ensure the kitchen gets exactly what the customer intended."
      layoutDirection="quote-left"
  >
      <Fragment slot="feature-graphic">
          <!-- Simple graphic comparing a clean Okra order vs. a messy handwritten note -->
      </Fragment>
  </QuoteFeatureSplit>

  <!-- Feature Detail 2: Mobile & Intuitive Flow -->
  <section class="py-16 md:py-24">
    <FeaturesStatsAlt
        title={featureMobile.title}
        subTitle={featureMobile.subTitle}
        benefits={featureMobile.listItems}
        imgSrc={featureMobile.imgSrc}
        imgAlt={featureMobile.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureMobile.imagePosition}
    />
  </section>

  <!-- Feature Detail 3: Smart & Secure Checkout -->
  <section class="py-16 md:py-24 bg-white rounded-xl">
     <FeaturesStatsAlt
        title={featureCheckout.title}
        subTitle={featureCheckout.subTitle}
        benefits={featureCheckout.listItems}
        imgSrc={featureCheckout.imgSrc}
        imgAlt={featureCheckout.imgAlt}
        imgWidth={500}
        imgHeight={600}
        imagePosition={featureCheckout.imagePosition}
    />
  </section>

  <!-- Feature Detail 4: Automated Communication (Custom Section) -->
  <section class="py-16 md:py-24">
      <div class="container mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold text-neutral-800 mb-4">Keep Customers in the Loop, Automatically</h2>
        <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto">
            Reduce "Where's my order?" calls. Okra automatically sends email and SMS text notifications to confirm orders and update customers on payment status, providing peace of mind and a professional touch.
        </p>
        <div class="flex flex-col sm:flex-row justify-center items-center gap-y-6 sm:gap-x-12">
            <div class="text-center">
                <Icon name="heroicons:envelope" class="w-12 h-12 mx-auto text-primary mb-2" />
                <p class="font-semibold text-neutral-700">Order Confirmations</p>
            </div>
            <div class="text-center">
                <Icon name="heroicons:chat-bubble-left-ellipsis" class="w-12 h-12 mx-auto text-primary mb-2" />
                <p class="font-semibold text-neutral-700">Payment Status Updates</p>
            </div>
            <div class="text-center">
                <Icon name="heroicons:clock" class="w-12 h-12 mx-auto text-gray-400 mb-2" />
                <p class="font-semibold text-gray-400">(More coming soon)</p>
            </div>
        </div>
      </div>
  </section>

  <!-- CTA Section (Custom Section) -->
  <section class="bg-primary text-white py-16 rounded-xl">
      <div class="container mx-auto px-6 text-center">
          <h2 class="text-3xl font-bold mb-4">{finalCTA.title}</h2>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">{finalCTA.subTitle}</p>
          <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
              <PrimaryCTA title={finalCTA.primaryBtn} url={finalCTA.primaryBtnURL} />
              <a href={finalCTA.secondaryBtnURL} target="_blank" rel="noopener noreferrer">
                 <SecondaryCTA title={finalCTA.secondaryBtn} url={finalCTA.secondaryBtnURL} />
              </a>
          </div>
      </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-16 md:py-24 bg-neutral-50 dark:bg-neutral-900">
    <FAQ title="Your Online Ordering Questions Answered" faqs={onlineOrderingFaqs} />
  </section>

</MainLayout> 

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // --- Section Animations on Scroll ---
    gsap.utils.toArray<HTMLElement>('section').forEach(section => {
      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%", 
          toggleActions: "play none none reverse",
          // markers: true, 
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script> 
---
// Layout and Base Components
import MainLayout from "@/layouts/MainLayout.astro";
// import HeroSection from "@components/sections/landing/HeroSection.astro"; // Remove old hero
import HeroBackground from "@components/sections/landing/HeroBackground.astro"; // Add new hero
import PricingSection from "@components/sections/pricing/PricingSection.astro"; // For pricing tiers
import FAQ from "@components/sections/misc/FAQ.astro"; // For FAQ section
import { Icon } from 'astro-icon/components'; // For icons
// import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro"; // Removed unused import
// import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro"; // Removed unused import
import IconListSection from "@components/sections/features/IconListSection.astro"; // Added import
import CTASection from "@components/sections/misc/CTASection.astro"; // Added import
// import pricingHeroBg from '@/images/pricing-that-grows.png'; // Import the new background image
import okraHeaderBg from '@/images/okra-header.png'; // Import the new hero background image
import ctaBgImage from "@/images/layered-waves-haikei.svg"; // Import the background SVG

// Import pricing data directly from JSON
import pricingContent from "@/data_files/pricing.json";

// --- Page Data ---
const pageTitle = "Pricing | Okra Orders";
const pageDescription = "Simple, flexible pricing for Okra Orders catering software. Choose a plan that fits your business size and volume, from startups to multi-location operations.";

const hero = {
  title: "Simple, Flexible Pricing That Grows With Your Catering Business",
  subTitle: "Okra Orders offers straightforward pricing for caterers of all sizes. From the growing 'Starter' plan to the comprehensive 'Pro' plan and custom 'Enterprise' solutions, find the perfect fit. No hidden platform fees, just clear value and powerful catering management.",
  imgAlt: "Stylized graphic representing growth and flexibility in pricing", // Updated Alt text for new image
  imgSrc: okraHeaderBg, // Use imported image
  // Add visual placeholder comment/asset later if needed
};

// Config for Core Value Prop IconListSection
const coreValueProps = {
  title: "More Than Just Software: An Investment in Efficiency", // Use title instead of headline for component
  subTitle: "Okra Orders isn't just another tool; it's your operational hub. Our pricing reflects the value we bring by automating manual tasks, unifying your platforms, enhancing your customer experience, and ultimately giving you back time to focus on great food and service.",
  items: [
    { iconName: "heroicons:clock", text: "Save Hours Weekly" }, // Removed description
    { iconName: "heroicons:arrows-pointing-in", text: "Unified Platform" },
    { iconName: "heroicons:sparkles", text: "Elevated Customer Experience" },
    { iconName: "heroicons:chart-bar-square", text: "Scales With You" }
  ]
  // Note: Descriptions were part of the original custom layout
};

const pricingPhilosophy = {
  headline: "Choose the Plan That Fits Your Flow",
  body: "We understand every catering business is unique. That's why we offer clear pricing options. Whether you're starting out and prefer costs tied to your sales, or you're an established business seeking predictable monthly fees, Okra Orders delivers exceptional value.",
  optionA: "Our Pro Plan offers a comprehensive suite of features for a flat monthly fee per location, ideal for businesses focused on stability and advanced capabilities.",
  optionB: "Our Starter Plan is designed for growth, with a platform fee based on your processed order volume (up to a cap) and a low monthly minimum, ensuring affordability as you scale.",
  cta: "Explore the plans below or contact us to schedule a demo and discuss the best fit for your specific needs."
};

const integratedPayments = {
  headline: "Competitive, Integrated Payment Processing",
  body: "Okra Orders includes secure, PCI-compliant payment processing directly within the platform. Our competitive rates simplify your operations and cash flow. Full rate details are transparently provided during onboarding."
};

// FAQ Data
const pricingFaqs = {
  title: "Your Pricing Questions Answered",
  faqs: [
    { question: "Is there a free trial?", answer: "We currently focus on providing personalized demos tailored to your business needs rather than a one-size-fits-all free trial. This allows us to show you the most relevant features and answer your specific questions. Please contact us to schedule your demo!" },
    { question: "What if I only have one small catering location?", answer: "Absolutely. Our Starter Plan is designed for this, with a low $99 monthly minimum SaaS fee and a 3% revenue-based charge (up to $10k/mo in revenue), making it highly accessible. The goal is for Okra to provide immediate value." },
    { question: "Do I need to sign a long-term contract?", answer: "We offer flexible monthly subscriptions for our Starter and Pro plans, allowing you to adapt as your business evolves." },
    { question: "Are there additional fees for integrating with ezCater or QuickBooks?", answer: "Core integrations like ezCater order viewing and QuickBooks Online sales receipt pushing are included in our Pro Plan and above." },
    { question: "How does the volume-based pricing work?", answer: "Our Starter Plan links your platform fee to your processed order volume (3% of revenue up to $10,000/month, with a $99/month minimum). This ensures affordability as you grow. Once your volume consistently makes the Pro Plan more economical, we'll guide you to switch." },
    { question: "Are there setup fees or hidden costs?", answer: "We believe in transparent pricing. Our Starter and Pro plans have clear monthly SaaS fees plus competitive integrated payment processing rates. Standard onboarding is included. Custom work for Enterprise plans is scoped and quoted separately." },
    { question: "When does billing for the SaaS plan start?", answer: "Your first monthly SaaS fee (e.g., $99 for Starter, $300 for Pro) is charged only after your payment processing account is fully set up and your Okra Orders store is live and ready to take orders." },
    { question: "What's included in terms of support?", answer: "All plans include access to our in-app help resources (tours, tooltips, knowledge base) and standard support channels like live chat and email. Higher tiers may include more personalized support options like dedicated account management or priority video calls." }
  ]
};

// Final CTA Data
const finalCTA = {
  title: "Ready to Find the Perfect Fit?", // Use title instead of headline
  subTitle: "See how Okra Orders can transform your catering business. Schedule a personalized demo with our team, or explore our features with an interactive walkthrough.",
  primaryBtn: "Schedule Personalized Demo",
  primaryBtnURL: "/contact", // Assuming /contact is the page for demo requests
  secondaryBtn: "Try Interactive Demo",
  secondaryBtnURL: "https://demo.okraorders.com",
  bgImageURL: ctaBgImage.src, // Add background image
  textColor: "white" as const // Keep text white
};

---

<MainLayout title={pageTitle} meta={pageDescription}>

  <!-- 1. Hero Section -->
  {/* <div class="bg-gradient-to-b from-green-50 to-white pt-16 md:pt-24 pb-8 md:pb-12"> */}
    {/* <HeroSection
      title={hero.title}
      subTitle={hero.subTitle}
      primaryBtn={undefined}
      primaryBtnURL={undefined}
      secondaryBtn={undefined}
      secondaryBtnURL={undefined}
    /> */}
    {/* Visual Placeholder */}
    {/* <div class="text-center mt-8"><div class="inline-block bg-gray-200 h-48 w-96 rounded-lg"></div></div> */}
  {/* </div> */}
  <HeroBackground
    title={hero.title}
    subTitle={hero.subTitle}
    imgSrc={hero.imgSrc}
    imgAlt={hero.imgAlt}
    minHeight="min-h-[400px] md:min-h-[500px]"
    textShadow="text-shadow-lg"
    backgroundPosition="object-[50%_100%]"
  />

  <!-- 2. Core Value Proposition (Using IconListSection) -->
  <IconListSection
      title={coreValueProps.title}
      subTitle={coreValueProps.subTitle}
      items={coreValueProps.items}
  />
  {/*
  <section class="py-16 md:py-24">
      <div class="container mx-auto px-6 text-center">
          ...
      </div>
  </section>
  */}

  <!-- 3. Pricing Model Philosophy / Flexibility Explanation -->
  <section class="py-8 md:py-24 bg-white rounded-xl">
    <div class="container mx-auto px-6 max-w-3xl text-center">
        <h2 class="text-3xl font-bold text-neutral-800 mb-4">{pricingPhilosophy.headline}</h2>
        <p class="text-lg text-gray-600 mb-6">{pricingPhilosophy.body}</p>
        <div class="text-left space-y-4 bg-neutral-50 p-6 rounded-lg border border-neutral-200 mb-6">
           <p><strong class="text-neutral-700">Pro Plan:</strong> {pricingPhilosophy.optionA}</p>
           <p><strong class="text-neutral-700">Standard Plan:</strong> {pricingPhilosophy.optionB}</p>
        </div>
        <p class="text-lg text-gray-700 font-medium">{pricingPhilosophy.cta}</p>
    </div>
  </section>

  <!-- 4. Pricing Tiers Section - Data passed via prop -->
  <section class="py-0 md:py-24">
     <PricingSection pricing={pricingContent} />
     {/* Removed manual footnote, assuming component handles relevant data from JSON */}
  </section>

  <!-- 5. Integrated Payments Note -->
  <section class="py-6 md:py-24 bg-neutral-50 rounded-xl">
      <div class="container mx-auto px-6 max-w-3xl text-center">
         <Icon name="heroicons:credit-card" class="w-12 h-12 mx-auto text-primary mb-3" />
         <h2 class="text-3xl font-bold text-neutral-800 mb-4">{integratedPayments.headline}</h2>
         <p class="text-lg text-gray-600">{integratedPayments.body}</p>
      </div>
  </section>

  <!-- 6. FAQ Section -->
  <section class="py-0 md:py-24 bg-white my-12 rounded-2xl">
    <FAQ title={pricingFaqs.title} faqs={pricingFaqs} />
  </section>

  <!-- 7. Final CTA Section (Using CTASection Component) -->
   <CTASection
      title={finalCTA.title}
      subTitle={finalCTA.subTitle}
      primaryBtn={finalCTA.primaryBtn}
      primaryBtnURL={finalCTA.primaryBtnURL}
      secondaryBtn={finalCTA.secondaryBtn}
      secondaryBtnURL={finalCTA.secondaryBtnURL}
      bgImageURL={finalCTA.bgImageURL}
      textColor={finalCTA.textColor}
  />

  {/* Original custom section commented out properly */}
  {/*
  <section class="bg-primary text-white py-16 md:py-20 rounded-xl">
      <div class="container mx-auto px-6 text-center">
          ...
      </div>
  </section>
  */}

</MainLayout>

<script>
  // Optional: Add GSAP animations if desired
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    gsap.utils.toArray<HTMLElement>('section').forEach((section, i) => {
      // Skip hero if desired
      if (i === 0 && section.parentElement?.classList.contains('bg-gradient-to-b')) return;

      gsap.from(section, {
        scrollTrigger: {
          trigger: section,
          start: "top 85%",
          end: "bottom 15%",
          toggleActions: "play none none reverse",
          // markers: true,
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        ease: "power1.out",
      });
    });
  });
</script>
